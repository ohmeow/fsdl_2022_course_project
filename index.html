<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.1.251">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="description" content="Course Co-pilot helps course creators create lesson summaries and chapter markers using ML.">

<title>course_copilot - fsdl_2022_course_project</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>


<link rel="stylesheet" href="styles.css">
<meta property="og:title" content="course_copilot - fsdl_2022_course_project">
<meta property="og:description" content="Course Co-pilot helps course creators create lesson summaries and chapter markers using ML.">
<meta property="og:site-name" content="course_copilot">
<meta name="twitter:title" content="course_copilot - fsdl_2022_course_project">
<meta name="twitter:description" content="Course Co-pilot helps course creators create lesson summaries and chapter markers using ML.">
<meta name="twitter:card" content="summary">
</head>

<body class="nav-sidebar floating nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">course_copilot</span>
    </a>
  </div>
          <div id="quarto-search" class="" title="Search"></div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
    <div class="container-fluid d-flex justify-content-between">
      <h1 class="quarto-secondary-nav-title">fsdl_2022_course_project</h1>
      <button type="button" class="quarto-btn-toggle btn" aria-label="Show secondary navigation">
        <i class="bi bi-chevron-right"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse sidebar-navigation floating overflow-auto">
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link active">fsdl_2022_course_project</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./utils.html" class="sidebar-item-text sidebar-link">utils</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./preprocessing.html" class="sidebar-item-text sidebar-link">preprocessing</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./training.html" class="sidebar-item-text sidebar-link">training</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./transcription.html" class="sidebar-item-text sidebar-link">transcription</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./topic_segmentation.html" class="sidebar-item-text sidebar-link">topic_segmentation</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./summarization.html" class="sidebar-item-text sidebar-link">summarization</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./tasks.html" class="sidebar-item-text sidebar-link">tasks</a>
  </div>
</li>
    </ul>
    </div>
</nav>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#why" id="toc-why" class="nav-link active" data-scroll-target="#why">Why</a></li>
  <li><a href="#how-our-application-is-structured" id="toc-how-our-application-is-structured" class="nav-link" data-scroll-target="#how-our-application-is-structured">How our application is structured?</a></li>
  <li><a href="#what-have-we-done-so-far" id="toc-what-have-we-done-so-far" class="nav-link" data-scroll-target="#what-have-we-done-so-far">What have we done so far?</a>
  <ul class="collapse">
  <li><a href="#dataset" id="toc-dataset" class="nav-link" data-scroll-target="#dataset">Dataset</a></li>
  <li><a href="#ml-library-course_copilot" id="toc-ml-library-course_copilot" class="nav-link" data-scroll-target="#ml-library-course_copilot">ML library: course_copilot</a></li>
  <li><a href="#backend-api" id="toc-backend-api" class="nav-link" data-scroll-target="#backend-api">Backend API</a></li>
  <li><a href="#web-application" id="toc-web-application" class="nav-link" data-scroll-target="#web-application">Web Application</a></li>
  </ul></li>
  <li><a href="#future-plans" id="toc-future-plans" class="nav-link" data-scroll-target="#future-plans">Future Plans</a></li>
  <li><a href="#install" id="toc-install" class="nav-link" data-scroll-target="#install">Install</a></li>
  <li><a href="#setting-up-your-development-environment" id="toc-setting-up-your-development-environment" class="nav-link" data-scroll-target="#setting-up-your-development-environment">Setting up your development environment</a></li>
  <li><a href="#step-1-create-conda-environment" id="toc-step-1-create-conda-environment" class="nav-link" data-scroll-target="#step-1-create-conda-environment">Step 1: Create conda environment</a></li>
  <li><a href="#step-2-install-quarto" id="toc-step-2-install-quarto" class="nav-link" data-scroll-target="#step-2-install-quarto">Step 2: Install Quarto:</a></li>
  <li><a href="#step-3-install-hooks" id="toc-step-3-install-hooks" class="nav-link" data-scroll-target="#step-3-install-hooks">Step 3: Install hooks</a></li>
  <li><a href="#step-4-add-pre-commit-hooks-optional" id="toc-step-4-add-pre-commit-hooks-optional" class="nav-link" data-scroll-target="#step-4-add-pre-commit-hooks-optional">Step 4: Add pre-commit hooks (optional)</a></li>
  <li><a href="#step-5-install-our-library" id="toc-step-5-install-our-library" class="nav-link" data-scroll-target="#step-5-install-our-library">Step 5: Install our library</a></li>
  </ul>
<div class="toc-actions"><div><i class="bi bi-github"></i></div><div class="action-links"><p><a href="https://github.com/ohmeow/fsdl_2022_course_project/issues/new" class="toc-action">Report an issue</a></p></div></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title d-none d-lg-block">fsdl_2022_course_project</h1>
</div>

<div>
  <div class="description">
    Course Co-pilot helps course creators create lesson summaries and chapter markers using ML.
  </div>
</div>


<div class="quarto-title-meta">

    
    
  </div>
  

</header>

<!-- WARNING: THIS FILE WAS AUTOGENERATED! DO NOT EDIT! -->
<p>Our project is to create an augmented ML approach course creators can use to streamline the generation of lecture summaries and chapter markers based on lesson videos.</p>
<div class="callout-tip callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>Do checkout out <a href="https://www.loom.com/share/ca26fff6b911478c879da679495e8f67">video demo showcasing Course Co-pilot</a>.</p>
</div>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://user-images.githubusercontent.com/24592806/195798582-4ef1cd04-24d9-427e-bb0f-3fbb41e1a0e3.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Functionalities of Course Co-pilot</figcaption><p></p>
</figure>
</div>
<p>The basic workflow is:</p>
<ol type="1">
<li>User opens a link to a YouTube video lecture in our application and asks Course Co-Pilot to process it</li>
<li>User can view status of requests via the “Get Predictions” button.</li>
<li>User can view predicted topic boundaries, headlines, &amp; content summaries for processed videos.</li>
<li>User can correct and save generated content (planned later to use in data flywheel)</li>
<li>User will be able to export results as chapter markers to use in YouTube(planned later)</li>
<li>User will be able to export results in a quarto friendly format for posting to a web page or blog.(planned later)</li>
</ol>
<section id="why" class="level2">
<h2 class="anchored" data-anchor-id="why">Why</h2>
<p>In our own experience, we have noticed that such content either doesn’t get done, is time consuming, and/or requires work from outside parties. In particular, we noted in the below courses we’ve been a part of:</p>
<ol type="1">
<li><p>Fast.ai course - During the course students manually create <a href="https://forums.fast.ai/t/help-wanted-youtube-chapter-markers/96306">youtube chapter markers</a>, <a href="https://forums.fast.ai/t/help-wanted-transcriptions/96307">lesson transcripts</a>, and summaries on the forums.</p></li>
<li><p>FSDL course - The chapter markers and <a href="https://fullstackdeeplearning.com/course/2022/lecture-2-development-infrastructure-and-tooling/">lesson notes</a> are later created manually and then shared on the FSDL website usually 1 week after the each lesson.</p></li>
</ol>
</section>
<section id="how-our-application-is-structured" class="level2">
<h2 class="anchored" data-anchor-id="how-our-application-is-structured">How our application is structured?</h2>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://user-images.githubusercontent.com/24592806/195852655-3e22b972-d09f-4646-8f75-70a04bda2081.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">System Diagram</figcaption><p></p>
</figure>
</div>
</section>
<section id="what-have-we-done-so-far" class="level2">
<h2 class="anchored" data-anchor-id="what-have-we-done-so-far">What have we done so far?</h2>
<p>Let’s look at the dataset, ML library, API, and web application we created for our prototype system</p>
<section id="dataset" class="level3">
<h3 class="anchored" data-anchor-id="dataset">Dataset</h3>
<p>Since we had to train summarization models and topic segmentation models, we manually created our dataset from a bunch of youtube videos ranging from videos from fastai lessons, FSDL lesson to random videos teaching something.</p>
<p><a href="https://huggingface.co/datasets/kurianbenoy/Course_summaries_dataset">Dataset Link</a></p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://user-images.githubusercontent.com/24592806/195852870-b9f2acb2-99a7-44a4-92f1-5f465cd1a45b.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Dataset Schema</figcaption><p></p>
</figure>
</div>
</section>
<section id="ml-library-course_copilot" class="level3">
<h3 class="anchored" data-anchor-id="ml-library-course_copilot">ML library: course_copilot</h3>
<p>We leveraged nbdev framework to create a python package which acted as our framework for Model training and model serving. We integrated Wandb for experiment tracking and fine tuning models with sweeps. We created Model trainers for task of topic segmentation and summarization. The timing of our project coincided with release whisper which we used for creating transcription of youtube video URL you are passing. This helps to provide the required data for creating topic segments and summaries.</p>
<p><a href="https://github.com/ohmeow/fsdl_2022_course_project">fsdl_2022_course_project</a></p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://user-images.githubusercontent.com/24592806/195852790-fef77960-1066-414d-8568-a177f4d1159e.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">nbdev based Model Trainer for Topic Segmentation, Experiment tracking with W&amp;B</figcaption><p></p>
</figure>
</div>
</section>
<section id="backend-api" class="level3">
<h3 class="anchored" data-anchor-id="backend-api">Backend API</h3>
<p>For the backend, we used FastAPI for creating APIs. Our API is leveraging dagster as the workflow engine to create tasks for running inference jobs from creating transcripts of video with whisper, running topic segmentation and running the summarization models.</p>
<p><a href="https://github.com/suvash/fsdl-2022-group-007-app">fsdl-2022-group-007-app</a></p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://user-images.githubusercontent.com/24592806/195852828-52217828-cab7-4b7f-b6e6-227a5cb27abe.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Course Copilot APIs</figcaption><p></p>
</figure>
</div>
</section>
<section id="web-application" class="level3">
<h3 class="anchored" data-anchor-id="web-application">Web Application</h3>
<p>We created our front-end web application using Vue3 and Quasar. It is deployed to github pages from our repo.</p>
<p><a href="https://github.com/ohmeow/fsdl-2022-group-007-web">fsdl-2022-group-007-web</a></p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://user-images.githubusercontent.com/24592806/195858845-4ba257ea-935f-4e57-8650-732e493aa7b3.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Topic summaries and chapter summaries generated</figcaption><p></p>
</figure>
</div>
</section>
</section>
<section id="future-plans" class="level2">
<h2 class="anchored" data-anchor-id="future-plans">Future Plans</h2>
<ul>
<li>Improve quality of training data</li>
<li>Allow users to save their corrected headlines and summaries</li>
<li>Add ability for users to update topic spans</li>
<li>Implement data flywheel</li>
<li>Implement chapter marker and quarto export features</li>
<li>Add authentication/authorization</li>
</ul>
</section>
<section id="install" class="level2">
<h2 class="anchored" data-anchor-id="install">Install</h2>
<div class="sourceCode" id="cb1"><pre class="sourceCode sh code-with-copy"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="ex">pip</span> install course_copilot</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="setting-up-your-development-environment" class="level2">
<h2 class="anchored" data-anchor-id="setting-up-your-development-environment">Setting up your development environment</h2>
<p>Please take some time reading up on nbdev … how it works, <a href="https://nbdev.fast.ai/explanations/directives.html">directives</a>, etc… by checking out <a href="https://nbdev.fast.ai/tutorials/tutorial.html">the walk-thrus</a> and <a href="https://nbdev.fast.ai/tutorials/">tutorials</a> on the nbdev <a href="https://nbdev.fast.ai/">website</a></p>
</section>
<section id="step-1-create-conda-environment" class="level2">
<h2 class="anchored" data-anchor-id="step-1-create-conda-environment">Step 1: Create conda environment</h2>
<p>After cloning the repo, create a conda environment. This will install nbdev alongside other libraries likely required for this project.</p>
<p><code>mamba env create -f environment.yml</code></p>
</section>
<section id="step-2-install-quarto" class="level2">
<h2 class="anchored" data-anchor-id="step-2-install-quarto">Step 2: Install Quarto:</h2>
<p><code>nbdev_install_quarto</code></p>
</section>
<section id="step-3-install-hooks" class="level2">
<h2 class="anchored" data-anchor-id="step-3-install-hooks">Step 3: Install hooks</h2>
<p><code>nbdev_install_hooks</code></p>
</section>
<section id="step-4-add-pre-commit-hooks-optional" class="level2">
<h2 class="anchored" data-anchor-id="step-4-add-pre-commit-hooks-optional">Step 4: Add pre-commit hooks (optional)</h2>
<p>If using VSCode, you can install pre-commit hooks “to catch and fix uncleaned and unexported notebooks” before pushing to get. See the instructions in the nbdev documentation if you want to use this feature. https://nbdev.fast.ai/tutorials/pre_commit.html</p>
</section>
<section id="step-5-install-our-library" class="level2">
<h2 class="anchored" data-anchor-id="step-5-install-our-library">Step 5: Install our library</h2>
<p><code>pip install -e '.[dev]'</code></p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    setTimeout(function() {
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
});
</script>
</div> <!-- /content -->



</body></html>